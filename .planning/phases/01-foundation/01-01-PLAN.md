---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [frontend/package.json, frontend/vite.config.ts, frontend/tsconfig.json, frontend/index.html, frontend/src/main.tsx, frontend/src/App.tsx, frontend/src/App.css, frontend/src/lib/websocket.ts]
autonomous: true

must_haves:
  truths:
    - "User can run npm run dev and see React app in browser"
    - "Frontend builds without TypeScript errors"
    - "WebSocket client module exists and can attempt connection"
  artifacts:
    - path: "frontend/package.json"
      provides: "Project dependencies and scripts"
      contains: "vite"
    - path: "frontend/src/App.tsx"
      provides: "Root React component"
      min_lines: 15
    - path: "frontend/src/lib/websocket.ts"
      provides: "WebSocket connection handler"
      exports: ["connectWebSocket", "sendMessage"]
  key_links:
    - from: "frontend/src/App.tsx"
      to: "frontend/src/lib/websocket.ts"
      via: "import for connection status"
      pattern: "import.*websocket"
---

<objective>
Create React frontend with Vite and WebSocket client infrastructure.

Purpose: Establish the frontend foundation that will host the chat interface, dashboard, and voice controls in later phases.
Output: Working Vite+React development server with WebSocket client ready to connect.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Layout reference: layout_prototype.png shows:
- Left panel for chat
- Center area for dashboard with metrics/visualizations
- Bottom tabs for navigation
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Vite React TypeScript project</name>
  <files>frontend/package.json, frontend/vite.config.ts, frontend/tsconfig.json, frontend/index.html, frontend/src/main.tsx, frontend/src/App.tsx, frontend/src/App.css</files>
  <action>
    Create frontend directory and initialize with Vite React TypeScript template:
    1. Run `npm create vite@latest frontend -- --template react-ts` from project root
    2. cd into frontend and run `npm install`
    3. Update vite.config.ts to set server port to 5173 (default, but explicit)
    4. Update App.tsx to show a simple "Presto-Change-O" heading with connection status placeholder
    5. Add basic CSS for dark theme background (#0a1628 per layout prototype)

    Do NOT add complex layouts yet - just the minimal shell proving React works.
  </action>
  <verify>
    cd frontend && npm run build
    # Should complete without errors
  </verify>
  <done>
    - frontend/package.json exists with vite, react, react-dom, typescript
    - npm run build succeeds
    - npm run dev starts server on localhost:5173
  </done>
</task>

<task type="auto">
  <name>Task 2: Create WebSocket client module</name>
  <files>frontend/src/lib/websocket.ts</files>
  <action>
    Create WebSocket client utility:
    1. Create frontend/src/lib/ directory
    2. Create websocket.ts with:
       - connectWebSocket(url: string): WebSocket - creates connection with reconnect logic
       - sendMessage(ws: WebSocket, message: object): void - JSON stringify and send
       - Connection state type: 'connecting' | 'connected' | 'disconnected' | 'error'
       - Event handlers for onopen, onclose, onerror, onmessage
       - Basic reconnection with exponential backoff (1s, 2s, 4s max 30s)
    3. Export types and functions

    Use standard WebSocket API (no libraries needed). Default URL should be ws://localhost:8000/ws.
    Do NOT connect automatically - export function for explicit connection.
  </action>
  <verify>
    cd frontend && npx tsc --noEmit
    # Should pass type checking
  </verify>
  <done>
    - frontend/src/lib/websocket.ts exists
    - Exports connectWebSocket, sendMessage
    - TypeScript compiles without errors
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd frontend && npm run build` succeeds
- [ ] `cd frontend && npx tsc --noEmit` passes
- [ ] frontend/src/lib/websocket.ts exports connectWebSocket and sendMessage
- [ ] frontend/src/App.tsx renders without errors
</verification>

<success_criteria>

- Frontend Vite project initialized and builds
- WebSocket client module created with connection utilities
- All TypeScript compiles without errors
- Ready to connect to backend WebSocket endpoint
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
